<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title><%= htmlWebpackPlugin.options.title %></title>
    <style>
      body {
        cursor: default;
        font-family: "Nunito Sans", sans-serif;
        margin: 0;
        padding: 32px;
      }
    </style>
    <script type="text/javascript">
      const userId = "3b17362c-0c91-4fcd-a829-885a2343eb67";
      /* window.loadCourier = function (config) {
        if (!config || !config.clientKey || !config.userId) {
          return Promise.reject();
        }
        window.courierConfig = { ...config };

        return new Promise((resolve) => {
          var src =
            "https://courier-components-xvdza5.s3.amazonaws.com/latest.js";
          (function () {
            var d = document;
            var s = d.createElement("script");
            s.type = "text/javascript";
            s.onload = resolve;
            s.charset = "utf-8";
            s.async = true;
            s.src = src;
            document.body.appendChild(s);
          })();
        });
      };*/
      window.courierConfig = {
        clientKey: "ZDRiMTViNmMtODdmZi00OWMzLWI5YTgtYmU5NTc3YTRlM2Y1",
        userId,
        apiUrl: "https://rubmz24skk.execute-api.us-east-1.amazonaws.com/dev",
        wsOptions: {
          connectionTimeout: 20000,
          url: "wss://20en15n3ng.execute-api.us-east-1.amazonaws.com/dev",
          onError: (event) => {
            console.log("event", event);
          },
        },
        components: {
          inbox: {
            openLinksInNewTab: false,
          },
        },
      };

      window.addInbox = () => {
        const existingComponent = document.querySelector("courier-inbox");
        if (existingComponent) {
          existingComponent.remove();

          setTimeout(() => {
            const inbox = document.createElement("courier-inbox");
            document.body.appendChild(inbox);
          }, 2000);
          return;
        }

        const inbox = document.createElement("courier-inbox");
        document.body.appendChild(inbox);
      };
    </script>
  </head>
  <body>
    <h1>Treva Homepage</h1>
    <courier-inbox></courier-inbox>
    <courier-toast></courier-toast>
    <div id="root" />
  </body>
</html>
