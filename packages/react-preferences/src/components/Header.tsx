import { usePreferences } from "@trycourier/react-hooks";
import React, { useEffect } from "react";
import styled from "styled-components";

export const Header: React.FunctionComponent<{ draft?: boolean }> = ({
  draft = false,
}) => {
  const preferences = usePreferences();
  useEffect(() => {
    preferences.fetchPreferencePage(draft);
  }, []);

  const HeaderWrapper = styled.div`
    padding: 0 20px;
    margin-bottom: 20px;
  `;

  const ImageWrapper = styled.div`
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 4px;
    h1 {
      font-size: 32px;
      margin: 0;
    }
  `;

  const Image = styled.div`
    img {
      max-height: 48px;
    }
  `;

  const FreeTierText = styled.div`
    display: flex;
    align-items: center;
    justify-content: start;
    gap: 4px;
    p {
      margin: 0;
      text-color: black;
    }
    svg {
      height: 16px;
    }
}
  `;

  if (preferences.isLoading || !preferences.preferencePage) {
    return null;
  }

  return (
    <HeaderWrapper>
      <ImageWrapper>
        <Image>
          {preferences.preferencePage.brand.logo.image ? (
            <img src={`${preferences.preferencePage.brand.logo.image}`} />
          ) : (
            <svg
              xmlns="http://www.w3.org/2000/svg"
              height="48"
              viewBox="0 0 373 85"
              fill="none"
            >
              <path
                d="M79.4 38.3C79.6 38 79.7 37.7 79.6 37.4C76.3 18.7 60 4.5 40.4 4.5C18.3 4.5 0.399987 22.5 0.599987 44.6C0.799987 66.1 18.8 84.1 40.3 84.1C58.5 84.1 73.9 72 78.7 55.3C78.9 54.7 78.6 54.1 78 53.9L76.4 53.3C70 51 62.9 51.9 57.3 55.5C54.7 57.2 52.8 58.6 52.8 58.6C49.6 60.8 45.6 62.1 41.4 62.1C30.2 62.1 22.3 52.9 21.1 41.8L20.2 35.7C19.9 33.8 18.7 32.3 16.9 31.6L14.6 30.7C14.2 30.5 14.1 30.1 14.3 29.7C23.9 16.9 35.7 19.6 35.7 19.6C37.8 19.8 39.6 20.6 41 21.5C43.1 22.9 44.7 25 45.7 27.3C49.3 35.6 57.6 41.4 67.2 41.4C67.2 41.4 76.4 41.8 79.4 38.3Z"
                fill="#2C1437"
              />
              <path
                d="M25.1 28.7C26.3702 28.7 27.4 27.6703 27.4 26.4C27.4 25.1298 26.3702 24.1 25.1 24.1C23.8297 24.1 22.8 25.1298 22.8 26.4C22.8 27.6703 23.8297 28.7 25.1 28.7Z"
                fill="#2C1437"
              />
              <path
                d="M25.6 40.8C26.2 44.4 29 55.9 41.8 58C42 58 42.1 57.8 41.9 57.7C39 56.3 31.2 51.9 26 40.7C25.8 40.6 25.6 40.6 25.6 40.8Z"
                fill="#2C1437"
              />
              <path
                d="M141.2 54.9C141.2 71.1 128.9 83.2 112.8 83.2C96.7 83.2 84.5 71.1 84.5 54.9C84.5 38.5 96.7 26.3 112.8 26.3C128.9 26.3 141.2 38.5 141.2 54.9ZM102 54.9C102 61.3 106.7 66.1001 112.9 66.1001C119.2 66.1001 123.9 61.3 123.9 54.9C123.9 48.2 119.2 43.4 112.9 43.4C106.6 43.4 102 48.3 102 54.9Z"
                fill="#2C1437"
              />
              <path
                d="M199.8 56.7C199.8 72.2 188.9 83.2 173.6 83.2C158.2 83.2 147.2 72.2 147.2 56.7V27.4H165V56.7C165 62.5 168.3 66.1 173.7 66.1C178.8 66.1 182.2 62.4 182.2 56.7V27.4H199.8V56.7Z"
                fill="#2C1437"
              />
              <path
                d="M243.6 27V43.2C241.6 42.9 239.7 42.5 237.9 42.5C230.5 42.5 224.5 46.4 224.5 56.8V82.1H206.8V27.4H224.5V33.2C227.7 28.9 232.4 26.4 238.4 26.4C240 26.4 241.7 26.6 243.6 27Z"
                fill="#2C1437"
              />
              <path
                d="M269.9 10.8C269.9 16.6 265.1 21.4 259.4 21.4C253.6 21.4 248.8 16.5 248.8 10.8C248.8 5.10003 253.7 0.300027 259.4 0.300027C265.1 0.200027 269.9 5.10003 269.9 10.8ZM268.1 27.4V82.1H250.4V27.4H268.1Z"
                fill="#2C1437"
              />
              <path
                d="M329.4 59.4H290.4C291.7 65.1 296.4 68.6 302.5 68.6C307.8 68.6 310.8 66.4 311.6 63.4H329C327.3 75.5 317 83.3 303 83.3C286.8 83.3 274.2 70.8 274.2 54.7C274.2 38.7 286.6 26.4 302.7 26.4C317.6 26.4 329.9 38.2 329.9 53.1C329.8 54.5 329.6 57.4 329.4 59.4ZM311.2 48.2C310.8 43.8 306.5 40.8 301.8 40.8C296.9 40.8 293 43 291.2 48.2H311.2Z"
                fill="#2C1437"
              />
              <path
                d="M372.7 27V43.2C370.7 42.9 368.8 42.5 367 42.5C359.6 42.5 353.6 46.4 353.6 56.8V82.1H335.9V27.4H353.6V33.2C356.8 28.9 361.5 26.4 367.5 26.4C369.1 26.4 370.8 26.6 372.7 27Z"
                fill="#2C1437"
              />
            </svg>
          )}
        </Image>
      </ImageWrapper>

      {preferences.preferencePage.showCourierFooter && (
        <FreeTierText>
          <p>Notifications provided by </p>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 187 43"
            fill="none"
          >
            <path
              d="M40 19.2C40.1 19.1 40.1999 18.9 40.0999 18.7C38.4999 9.39998 30.3 2.29999 20.5 2.29999C9.49997 2.29999 0.499946 11.3 0.599946 22.3C0.699946 33 9.7 42 20.4 42.1C29.5 42.1 37.1999 36 39.5999 27.7C39.6999 27.4 39.5 27.1 39.2 27L38.4 26.7C35.2 25.6 31.7 26 28.8 27.8C27.5 28.6 26.5999 29.3 26.5999 29.3C24.9999 30.4 23 31 20.9 31C15.3 31 11.4 26.4 10.7 20.8L10.3 17.7C10.2 16.8 9.49998 16 8.69998 15.6L7.59995 15.2C7.39995 15.1 7.29997 14.9 7.49997 14.7C12.3 8.29998 18.2 9.69998 18.2 9.69998C19.2 9.79998 20.1 10.2 20.8 10.7C21.9 11.4 22.6 12.5 23.2 13.6C25 17.7 29.1 20.6 34 20.6C33.9 20.8 38.5 21 40 19.2Z"
              fill="#2C1437"
            />
            <path
              d="M12.9 14.5C13.5628 14.5 14.1 13.9627 14.1 13.3C14.1 12.6372 13.5628 12.1 12.9 12.1C12.2373 12.1 11.7 12.6372 11.7 13.3C11.7 13.9627 12.2373 14.5 12.9 14.5Z"
              fill="#2C1437"
            />
            <path
              d="M13.1 20.5C13.4 22.3 14.8 28 21.2 29.1C21.3 29.1 21.3 29 21.3 28.9C19.8 28.2 16 26 13.3 20.4C13.2 20.4 13.1 20.4 13.1 20.5Z"
              fill="#2C1437"
            />
            <path
              d="M70.9 27.5C70.9 35.6 64.7 41.6 56.7 41.6C48.7 41.6 42.6 35.6 42.6 27.5C42.6 19.3 48.7 13.2 56.7 13.2C64.8 13.2 70.9 19.3 70.9 27.5ZM51.3 27.5C51.3 30.7 53.6 33.1 56.7 33.1C59.9 33.1 62.2 30.7 62.2 27.5C62.2 24.2 59.9 21.7 56.7 21.7C53.6 21.8 51.3 24.2 51.3 27.5Z"
              fill="#2C1437"
            />
            <path
              d="M100.2 28.4C100.2 36.2 94.8 41.7 87.1 41.7C79.4 41.7 73.9 36.2 73.9 28.4V13.8H82.8V28.4C82.8 31.3 84.5 33.1 87.1 33.1C89.7 33.1 91.4 31.3 91.4 28.4V13.8H100.2V28.4Z"
              fill="#2C1437"
            />
            <path
              d="M122.1 13.6V21.7C121.1 21.5 120.2 21.4 119.3 21.4C115.6 21.4 112.6 23.3 112.6 28.6V41.2H103.7V13.9H112.6V16.8C114.2 14.6 116.5 13.4 119.5 13.4C120.4 13.3 121.2 13.4 122.1 13.6Z"
              fill="#2C1437"
            />
            <path
              d="M135.3 5.49998C135.3 8.39998 132.9 10.8 130 10.8C127.1 10.8 124.7 8.39998 124.7 5.49998C124.7 2.69998 127.1 0.199982 130 0.199982C132.9 0.199982 135.3 2.59998 135.3 5.49998ZM134.4 13.8V41.1H125.5V13.8H134.4Z"
              fill="#2C1437"
            />
            <path
              d="M165 29.8H145.5C146.2 32.6 148.5 34.4 151.5 34.4C154.2 34.4 155.7 33.3 156 31.8H164.7C163.9 37.8 158.7 41.7 151.7 41.7C143.6 41.7 137.3 35.4 137.3 27.4C137.3 19.4 143.5 13.3 151.6 13.3C159 13.3 165.2 19.2 165.2 26.7C165.2 27.3 165.1 28.8 165 29.8ZM155.9 24.2C155.7 22 153.6 20.5 151.2 20.5C148.8 20.5 146.8 21.6 145.9 24.2H155.9Z"
              fill="#2C1437"
            />
            <path
              d="M186.7 13.6V21.7C185.7 21.5 184.8 21.4 183.9 21.4C180.2 21.4 177.2 23.3 177.2 28.6V41.2H168.3V13.9H177.2V16.8C178.8 14.6 181.1 13.4 184.1 13.4C184.9 13.3 185.7 13.4 186.7 13.6Z"
              fill="#2C1437"
            />
          </svg>
        </FreeTierText>
      )}
    </HeaderWrapper>
  );
};
